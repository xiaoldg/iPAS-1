# 資訊安全威脅
```
1.資訊安全威脅的目的
  1.1侵入
  1.2篡改或否認 
  1.3阻斷服務
  1.4認識一般的攻擊
     1.4.1密碼猜測攻擊
     1.4.2後門攻擊
     1.4.3中間人攻擊
     1.4.4重放攻擊
     1.4.5欺騙攻擊
     1.5認識軟體弱點的利用
2.惡意程式
  2.1電腦病毒
  2.2電腦病毒種類
3. TCP/IP 協定
  3.1應用層
  3.2傳輸層
  3.3網際網路層
  3.4網路介面層
  3.5電腦連接埠
  3.6TCP 連結
  3.7 TCP/IP 的攻擊 
  3.8認識社交工程
```
## 1.資訊安全威脅的目的
```
達到侵入 (access) 的目的。讓沒有進入權限的人或系統能夠未經授權地使用他人資源。目的在破壞 CIA 裡的機密性 (confidentiality).
達到篡改或否認 (repudiation) 的目的。讓沒有修改權利的人或系統能夠竄改他人資訊或否認某些事實。目的在破壞完整性 (integrity).
達到阻斷服務 (denial-of-service, DoS) 的目的。讓惡意的人或系統能夠干擾或阻斷他人網路或服務。目的在破壞可用性 (availability).
```
### 1.1侵入
```
侵入 (access attack) 主要在破壞對方系統的機密性，其手法眾多，以下是部份類別：
   垃圾搜尋 (dumpster diving) 是一種實體攻擊的方法，攻擊者搜尋垃圾以找出可能含有密碼或機密訊息的廢棄文檔。
   竊聽 (eavesdropping)：機密常在不經意的對話中遭有心人竊聽。
   窺視 (snooping)：包括實體文件或是電腦中的檔案被有心人窺視或利用，辦公桌上的小紙條也經常是不經意洩密的元凶。
   中間監看 (sniffers) 手法常被使用在網路環境中，可以在收發者間直接掛線，或是在 ISP 裝置側錄功能。
```
### 1.2篡改與否認
```
篡改 (modification) 是指未經授權的刪除、插入、或更改資訊，並期望別人無法察覺。例如學生更改考試成績，或是駭客進銀行網路刪除信用卡消費紀錄等。

否認 (repudiation) 是將正確的資訊弄成無效或誤導的狀態。例如惡意者冒名發騷擾郵件給他人，或是惡作劇學生侵入系上網站發布放假三天的消息等。

否認的反面為不可否認 (non-repudiation)，是指藉由提供原本的證據，使發件人不能否認曾發出信息，而收件人也不能否認曾收到信息。
例如在網路上購物，商家有時不只要求消費者提供信用卡號，還要信用卡的 PIN。藉由消費者的身分確認，商家就有不可否認的證據來進行交易。
```
### 1.3阻斷服務
```
阻斷服務 (denial-of-service, DoS) 是讓受害的網路或伺服器忙於處理假的服務要求，而無法處理真的要求。以下是兩種常見的 DoS 攻擊：
   Ping of death: 不停的對受攻擊的網路送ICMP封包 (如 Ping 指令)，超過系統所能承受。
   Buffer overflow: 傳送大量資料給系統，超過系統 buffer 所能承受的上限。
分散式 DoS (distributed DoS, DDOS) 則是由駭客的主機控制網路上多台傀儡電腦 (zombies) 同時對受害者發動 DoS 攻擊。
而發動攻擊的傀儡電腦的使用者其實也是不知情的受害者。
```
### 1.4認識一般的攻擊
```
許多攻擊是利用系統潛在的弱點，例如軟體或通訊協定在設計或安裝上的漏洞。幾種常見的攻擊手法如下：
   密碼猜測攻擊 (password-cracking attack)
   後門攻擊 (backdoor attack)
   中間人攻擊 (man-in-the-middle attack)
   重放攻擊 (replay attack)
   欺騙攻擊 (spoofing attack)
這些攻擊的目的可能是「侵入」、「篡改與否認」、「阻斷服務」或是他們的綜合。每項攻擊手法詳述如後。
```
#### 1.4.1密碼猜測攻擊
```
通關密碼破解工具很容易取得，它們大概都採用兩種方法，一是使用工具在中間監看，一是提供密碼檔案 (password file) 進行字典攻擊 (dictionary attack)。
字典攻擊與窮舉攻擊 (brute-force attack) 不同的是：
窮舉攻擊會逐一嘗試所有可能的密碼組合；而字典攻擊會使用一個預先定義好的密碼檔案 (字典) 中的常用單字。
為了防禦密碼猜測攻擊，通關密碼的設定應該：
   夠長，以增加窮舉攻擊的難度。
   夠冷門，以降低字典攻擊的成功率。
   經常更換，以防被攻破的帳號遭駭客長期利用。
```  
#### 1.4.2後門攻擊
```
後門的產生有兩種途徑，一種是軟體開發者原先設計的維護用後門 (maintenance hook)，另一種是侵入者留下的後門以便重新進入。
開發一個複雜的作業系統或應用軟體時，工程師常在程式裡設計後門以利測試與修改，但必須在產品上市前移除。
後門也可能由入侵者植入。
```
#### 1.4.3中間人攻擊
```
中間人攻擊是指在伺服器與使用者之間放置一個軟體，讓雙方都無法察覺。這個軟體攔截一方的資料，備份或篡改之後若無其事地傳送給另外一方。
近年隨著無線網路盛行，中間人攻擊更加容易。一來許多人使用無線網路並未加密 (尤其在公共場所)；
二來無線網路的中間人攻擊不需要掛線 (tapping)，在各種方便的位置都可以輕易進行。
```

#### 1.4.4重放攻擊
```
重放 (replay) 攻擊是指攻擊者攔截使用者登入資料，在稍後的時間再正式登入伺服器。重放攻擊對 Kerberos 之類的登入系統是有效的。
為避免重放攻擊，加解密過程常會使用會談金鑰 (session key)，會談時限一過，金鑰就失效。
```
#### 1.4.5欺騙攻擊
```
欺騙攻擊 (spoofing) 是攻擊者偽裝成一個熟悉並且可信任的的伺服器或網站，藉以騙取登入資料或其他秘密資訊。
網路釣魚 (phishing) 是一種欺騙攻擊，它可能是一個看似有公信力的惡意網站，或是冒名的電子郵件要受害者連結到惡意網站。
歹徒安置的假 ATM 機器也是欺騙攻擊的工具，受害者插入磁條提款卡並輸入密碼後即遭電子側錄。提款卡晶片化後，這類手法又被翻新。
```
### 1.5認識軟體弱點的利用
```
軟體弱點不一定是軟體錯誤，只是攻擊者利用某種軟體「功能」或合併數種功能來達到攻擊之目的。
資料隱碼 (SQL injection) 是一種未做好輸入查驗所發生的問題。
巨集病毒 (macro virus) 以巨集程式語言來撰寫，這種程式依附在該類型檔案中，並常經由電子郵件被傳播。Melissa 病毒與 Taiwan No.1 都屬於巨集病毒。
間諜軟體 (spyware) 常經由電子郵件或網站下載等途徑入侵。不同於病毒或蠕蟲，使用者通常自己將間諜軟體載入電腦而不自知，它會收集使用者電腦活動或顯示廣告等，大多為了商業利益。
Rootkit 病毒軟體能隱藏自己，它在執行時，視窗工作管理員 (Task Manager) 找不到它的蹤跡。
```

## 2.惡意程式
### 2.1電腦病毒
```
電腦病毒是一個寄居在其它程式上的小軟體，設計來感染電腦的。它可能僅只生存在電腦內不造成傷害，
也可能刪除磁碟上的資料、破壞作業系統、或傳染別台電腦。
電腦病毒通常有兩大目的：第一是傳染給別台電腦；其次是讓受害電腦不能運作。
電腦病毒傳染主要有三個途徑：
   經由受感染的可移式媒體 (removable media) 如軟碟、CD ROM、USB 碟傳染給其它電腦。
   經由電子郵件的附件傳染，這類病毒常再利用受害者的通訊錄傳送病毒給更多的潛在受害者。
   附著在別的「正常」軟體上。尤其越來越多人肆意的從網路上下載軟體，卻未細究該軟體是否已遭病毒感染。
```
### 2.2電腦病毒種類
```
千面人病毒 (polymorphic virus)：為了躲避掃毒工具的偵測，這類型病毒會利用變形的機制，
在感染每一個檔案時產生不同資料內容。他使用的方法通常是利用加密編碼或是壓縮。

隱藏型病毒 (stealth virus)：此類型病毒設計上具有隱藏的能力，可以避開一些防毒軟體的偵測。
例如把自己隱身在硬碟的 boot sector，或當病毒掃描時在不同的檔案間移動。

複合型病毒 (multipartite virus)：這類型病毒同時以數個方式攻擊電腦，例如感染 boot sector，
感染可執行檔，又去摧毀文字檔案。由於受害者不能同時修補所有的攻擊，它就有繼續寄生的機會。

反防毒病毒 (retrovirus)：這種病毒直接攻擊防毒軟體，尤其是病毒定義檔。
一旦成功，受害者將陷入一種錯誤的安全感 (false sense of security)，其實門戶洞卻而不自知。

加殼病毒 (armored virus)：這種病毒使用特殊的程式碼保護他們自己，因此更難偵測、分解、與瞭解其病毒碼。
製造這種病毒的想法是清除病毒的時間越長，病毒複製與傳播的範圍就越廣。

噬菌病毒 (phage virus)：這種病毒不是附著於其他程式或檔案，而是改變受害的程式或資料庫。
清除噬菌病毒唯一方法是重新安裝受感染的程式，但若病毒沒有清除乾淨，重裝的程式又會受到感染。

同伴病毒 (companion virus)：若有兩個程式同名，作業系統會先執行 .com 檔案，然後執行 .exe 程式。
同伴病毒化名為 .exe 程式同名的 .com，以利被使用者執行。

網路蠕蟲
   雖然「蠕蟲 (worm)」與「病毒」兩個名詞常被混用；但在正式定義上，兩者的差異在於：
   蠕蟲可以自己存在，不需要寄生於別的程式或檔案。
   蠕蟲可以複製自己，並自行在網際網路上傳播，不需靠人的參與。
   蠕蟲造成的傷害經常範圍極廣，因為蠕蟲在受害電腦上大量複製，再經由郵件通訊錄上的地址或TCP/IP位址傳播。
   蠕蟲快速複製與傳播的能力常大規模的占用系統資源 (如記憶體與網路頻寬)，導致網站、網路服務、與電腦系統無法正常運作，形成阻斷服務 (DoS) 的結果。
   
木馬程式
   不同於病毒或蠕蟲，木馬程式 (Trojan horse) 不自行複製、傳播或寄生，它進入受害者電腦的管道是靠著使用者錯誤的判斷。
   木馬程式偽裝成別的程式進入系統或網路，表面上是個使用者想要的程式，例如從網路上下載一個電玩遊戲，
      安裝之後也能正常操作；但這個程式可能同時在電腦內植入病毒、施放蠕蟲或開啟後門 (backdoor)。
      
邏輯炸彈
   邏輯炸彈 (logic bomb) 是被放置在受害系統中的軟體程式，被設定在某種條件下啟動一些破壞性的功能。
   病毒或蠕蟲等惡意程式也常伴隨著邏輯炸彈的設計，在某條件下啟動攻擊。這樣做可以讓程式散布夠廣之後，
     才一起爆發。較常見的發作日期是十三日星期五或是四月一日愚人節等。
```

## 3. TCP/IP 協定
### 3.1應用層
```
這是最高一層，讓應用程式透過服務與協定交換資料，大部分程式包括瀏覽器都在這一層與TCP/IP互動。
常見的應用層協定如下：
   Hypertext Transfer Protocol (HTTP): 在www如何傳送檔案的規則
   File Transfer Protocol (FTP): 主機與網際網路間傳輸資料的協定
   Simple Mail Transfer Protocol (SMTP): 傳送、接收、轉寄電子郵件
   Post Office Protocol (POP): 一種主從式協定，定義網際網路伺服器如何為使用者接收、儲存電子郵件
   Telnet: 一種互動式終端機的模擬協定
   Domain Name Service (DNS): 在網際網路上將主機名稱轉為IP位址
```
### 3.2傳輸層
```
這一層定義了應用程式之間的資料傳輸功能，它提供流量控制，錯誤偵測與修正等。主要有 TCP 與 UDP 兩種協定。
Transmission control protocol (TCP):
   TCP 建立可靠的、一對一連結，確定兩端都接收到每一個封包。
   TCP 也確定封包被正確的解碼與排序。
   這個連結在傳輸期間是持續的，傳輸結束就中斷。
User datagram protocol (UDP):
   UDP 在主機間提供非可靠性、非連結性的通訊。不確定每個封包都能送達，但盡力而為 (best effort)。
   UDP 比 TCP 快速，適合傳輸小封包。
```
### 3.3網際網路層
```
這一層負責安排路徑、設IP位址與封裝。它有以下協定：
   Internet protocol (IP): IP 定主機位址，並負責切割與重組封包。IP 按路徑傳送封包，但不檢查其正確性，那是 TCP 的事。
   Address resolution protocol (ARP): ARP 負責把IP位址轉換為下一面網路介面層 (network interface layer) 的位址，
      稱做 media access control(MAC) 位址。
   Internet control management protocol (ICMP): ICMP 提供維護與報告的功能。Ping 是 ICMP 的一個指令，
      當我們 Ping 一個IP位址，就可以檢查兩個系統間的連結狀態。
   Internet group management protocol (IGMP): IGMP 負責管理IP多接收者傳播 (multicast) 的群組。
```
### 3.4網路介面層
```
TCP/IP 的最底層，負責在實體的網路上收發封包。因為有這一層，所以 TCP/IP 幾乎可以在任何網路拓樸 (network topology) 或技術上實施。
如果公司更換新的網路架構 (例如升級到 10G Fiber Ethernet)，TCP/IP 只需要知道怎麼和網路控制器 (network controller) 溝通，即可正常運作。
TCP/IP 也可以同時在多種不同的網路架構上運作。
資料封裝
資料封裝 (encapsulation)：
應用程式的資料 (例如一封電子郵件) 先被加上TCP表頭 (header) 與錯誤檢查碼後封裝為TCP封包；
再加上IP位址等表頭後封裝為IP封包；最後被轉換為硬體網路上的0與1進行傳輸。
接收端則按反順序處理後，就得到原來的資料 (一封電子郵件)。
```
### 3.5電腦連接埠
```
電腦連接埠 (port) 是特殊位址讓主機之間能夠通訊。
要開始通訊的一方指出要求通訊的連接埠，若對方該連接埠可以使用，雙方開始通訊。連接埠定義於 TCP 封包的表頭內。

有些連接埠位址被約定特殊用途，稱為 well-known ports，理論上1024以前都是特殊連接埠，以下是其中部分：
  20   FTP (data channel)                    80    HTTP
  21   FTP (control channel)                 110   POP3
  22   SSH                                   119   NNTP
  23   Telnet                                143   IMAP 
  25   SMTP                                  161   SNMP
  53   DNS                                   443   HTTPS (secure web)
```
### 3.6TCP 連結
```
開啟 TCP 連結需要經過三向交握 (3-way handshake)：
   要求通訊的主機送出一個 SYN 封包給接收端，以要求同步。
   接收端回傳一個 SYN/ACK 封包，意味著「收到你的連結要求，並同意連結。」
   傳送端再回給接收端一個 ACK 封包，意味著「收到你的回覆，我們開始通訊吧！」。
連結開始後，雙方用適當的連接埠通訊，例如 web 使用80，而 POP3 使用 110。如此，伺服器可以同時處理許多的通訊要求。
```
### 3.7 TCP/IP 的攻擊 
```
TCP/IP 的攻擊可以發生在任何一層，但以傳輸及網際網路這兩層居多。
攻擊可以來自外部，也可來自內部。外部攻擊要靠弱點；但內部的任何一台主機都可輕易扮演網路監聽者 (sniffer)。
   許多網路使用匯流排 (bus) 架構，所有網路資料會送經每個主機，各主機的 NIC 卡會擷取屬於它的資料，
     而忽略不屬於它的。但若在任一主機上安裝網路監聽軟體，如微軟的 System Management Server (SMS) 或 Wireshark，就能看到網路上流經的資料。
   許多監聽軟體可以進一步重組封包來還原文件，包括別的使用者的 ID 與 password 都一覽無遺。
   外部攻擊者可以在機房附近的LAN網掛線，達到相同效果。
   
連接埠掃描 (port scanning) 是駭客發動攻擊的前哨戰。
   TCP/IP 允許外部使用者通過路由器 (router) 來連接一些電腦連接埠 (ports)。
   這些連接埠接到外部詢問訊息 (query) 時，會依固定的方式回應。
   所以駭客可以系統化地對受攻擊的網路送出不同的詢問訊息，以便從它們的反應判斷網路上有哪些服務和開放的連接埠。
   連接埠掃描的一個簡單方法使用 telnet 指令，例如要查某伺服器是否提供電子郵件服務，
   可以送給他 telnet www.xyz.com 25。如果這台伺服器提供 SMTP，它就會回應登入訊息。
   將連接埠掃描的範圍擴大，駭客經由試探範圍內的每個IP位址與連接埠之後，就能勾勒出受攻擊組織的整個網路結構，以做為發動攻擊的重要參考。
   
藉由 TCP/UDP 來攻擊網路的方法很多，以下是幾個例子：
   TCP 連結的開始，須經「三向交握」。要求通訊的主機發出 SYN，接收端回傳 SYN/ACK 之後就等傳送端的 ACK 來啟動通訊。
   但如果駭客一直發 SYN 卻永遠不回最後的 ACK，那麼接收端就會不停的累積連線要求無法消化，
   別的有用的連線需求就反而被阻擋，形成 DoS。這種攻擊稱為 SYN 洪水攻擊 (SYN flood attack)。
   TCP 封包的序號 (sequence number) 紀錄在封包內，TCP 將內容傳到上一層要靠序號決定順序。
   序號預測攻擊 (TCP sequence prediction attack) 是指駭客先在網路上監聽一段時間後，
   在真正的傳送者傳送某封包之前，先預測他的序號並搶先發出一樣序號的封包，接收端就會把這個假封包當作真的收下來。
   通常為了阻撓真的傳送者發出封包，駭客會用 SYN flood 先造成它的 DoS。 
   攻擊者以序號預測攻擊使自己成為中間人 (man in the middle) 之後，他就有機會劫持TCP/IP (TCP/IP hijacking)。
   攻擊者先假扮客戶端，接著就阻斷客戶端連線，取而代之。假設一個使用者從遠端使用 telnet 正在存取伺服器資訊，
   但連線被攻擊者劫持；那麼攻擊者就可以直接存取伺服器，而不需要經過登入的程序。
   
我們可以將已上這幾個攻擊手法串連起來：駭客先進行網路監聽 (偵查)，再對網路進行連接埠掃描 (測試)。
   當發現弱點時，例如某台伺服器正接受外部的 telnet，就以SYN洪水攻擊堵住客戶端，
   並用序號預測攻擊法讓伺服器接受對話 (侵入)；接著就可以劫持TCP/IP，並取代真的使用端以 telnet 存取伺服器 (控制)。
   如此，伺服器就淪駭客的禁臠 (利用與轉戰)。
```
### 3.8認識社交工程
```
最難防禦的資訊安全攻擊是人對人的欺騙，稱之為社交工程 (social engineering)。
社交工程是攻擊者藉由社交手法取得系統或網路的資訊，例如 ID, password 等。接觸管道包括電話、電子郵件、或面對面的與組織成員對話。
除了傳統管道外，即時通訊 (instant massaging, IM) 是較新的社交工程管道。以組織的角度來看，IM 像是一個個的後門，隨時會有機密資訊外洩的可能。
網路釣魚也是社交工程的一種。
防制社交工程的唯一方法是經由資訊安全的教育訓練。
```
