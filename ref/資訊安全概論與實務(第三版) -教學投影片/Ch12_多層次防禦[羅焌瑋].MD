# 多層次防禦
```
```
# 資訊安全攻擊
```
資訊安全事件
    「攻擊者」使用「工具」企圖對「受害者」達到某些「目的」

攻擊者
    指智慧型罪犯、駭客、病毒撰寫人或施放者、以及心有不滿的員工等主動攻擊者。
工具
    攻擊者使用的資訊工具極為廣泛，從大家較熟悉的病毒、蠕蟲、木馬，到網路監聽、密碼破解、DDoS 攻擊等工具，不一而足。
受害者
    最終受害者應該是指組織或個人，但受攻擊的標的頗多元，包括電腦主機、網路、應用程式或檔案資料。
目的
    不論主動的或非惡意的攻擊者最終破壞資訊的 CIA：
      保密性 (confidentiality)
      完整性 (integrity) 
      可用性 (availability)
```
# 資訊安全防禦
```
資訊安全防禦也是人與資訊的合作，在各種途徑上設下偵測與防禦機制，企圖阻止攻擊者達到目的。
組織應制訂並實施資訊安全政策 (policy)，以落實各項安全防禦措施。
人員應接受資訊安全認知 (awareness) 教育訓練，以正確使用安全防禦工具並避免欺騙攻擊。
依照指示更新網路元件、作業系統、應用程式與安全防禦軟體，減少本身可被利用的弱點 (vulnerabilities)。
使用安全防禦工具，包括防毒軟體、防間諜與釣魚軟體、入侵偵測與防禦系統、防火牆、垃圾郵件過濾軟體，
  經常掃描系統及網路，並正確地設定網路、系統及應用的安全相關機制，以降低攻擊威脅 (threats)。
```
# 攻擊與防禦的多元性
## 多層次防禦
```
攻擊手法與遭受攻擊的標的越來越多元化，多層次防禦 (layered defense) 應用多個策略保護資料與資源免於外部與內部的威脅。
全方位的防禦策略部署包括從邊界路由器 (boundary router)，到內部資源的所在位置，以及兩者之間的所有位置點。
部署多層安全性可以保障當某一層受到損害時，其它層能夠提供所需的安全性來保護資源。
    例如損壞組織的防火牆並不能使攻擊者存取組織最敏感的資料。
```
# 資訊安全攻擊防護
```
建置並落實資訊安全政策與管理程序，避免「安全空窗期」的機會。
從組織外部到存放機密的資料庫之間應隔離為多個安全區域，每個區域都有個別的防火牆。
除了防火牆之外，應設置其它網路安全機制，如入侵偵測系統 (IDS)。
存放信用卡資料的伺服器應有主機防火牆及事件檢視器等安全措施。
資料庫應有存取控制，信用卡資料應加密保護。
```
# 強化Windows作業系統
```
從Windows 2000起，微軟公司就提供視窗更新 (Windows Update)，可連結到微軟網站自動下載並安裝更新。
  使用者及系統維護人員要確定自己系統的各項更新、補丁都在最新的狀態。
技術問題
    微軟TechNet網站
      http://technet.microsoft.com
    微軟資訊安全網站則在
      http://www.microsoft.com/security/。
Windows提供系統記錄、報告、與監看的工具，可以有效地協助系統安全維護。
資源監視器能即時的監視CPU、磁碟機、網路、記憶體等電腦資源的效能，與執行中的程式。
  不論惡意程式或駭客入侵都會企圖「隱密」的進行，使用效能監視器可以讓它們無所遁形。
事件檢視器能檢視已發生事件之記錄。
  「凡走過，必留下痕跡。」這些記錄有助於追蹤入侵者及他們在系統中所做的事。
```
# Windows 檔案系統
```
微軟源自 DOS 時代的檔案系統 (filesystems) 稱為 File Allocation Table (FAT)，FAT-32可以使用於視窗作業系統。
  但FAT無法個別設定存取權限，所以在網際網路時代並不安全。
微軟建議所有與網路連接的電腦都使用 New Technology File System (NTFS) 檔案系統。
  NTFS 以 ACL維護檔案存取權限，在系統斷電時不會遺失使用中的文件，並可以對磁碟內的資料加密。
```
# 強化 Unix/Linux 作業系統
```
由於程式碼公開，Unix 經由各方專家檢視、辯論、與修補，一般相信安全漏洞較少；
  起碼像是忘記關閉測試後門這類問題較不易發生。
  
Unix/Linux 的安全問題大多發生於它們較複雜的設定程序與選項，管理員應該使用正確設定

大部分協定與服務都與 Unix 相容，管理員應該審慎評估哪些是組織需要的，然後關閉其它不用的服務。

Unix 的安全性存在於檔案階層，檔案與目錄應被妥善建立與管理，以確保正確的存取權限。

 Unix 也擁有非常豐富的事件記錄，可用以判斷入侵行為；同時管理員應該隨時更新供應商所提供之補丁。
```
# 更新作業系統
```
熱修補 (hotfixes) 
    是在作業系統運作中進行修補，但也許需要重新開機使修補生效。
    熱修補的好處是不需要立即中斷正常的電腦運作。
補丁包 (service packs) 
    是將許多的修補、更新、與升級收集為單一產品，補丁包通常會一次更動許多檔案，所以製造商出版前必須做徹底的測試。
補丁 (patches) 
    是暫時的或是治標的修補程式漏洞。
    補丁可以修補程式，但也可能造成新的問題，因此許多製造商寧可推出新的版本，而不是一次次的修補有問題的產品。
```
# 作業系統更新案例
# 網路協定與 NetBIOS
```
現今個人電腦系統大多使用TCP/IP，但部分公司仍使用其它網路協定，如NetBEUI。
  這些協定的任何一種都可以攜帶微軟作業系統裡的區域網路 (LAN) 協定 NetBIOS 到更廣的網路範圍。
  NetBIOS 通訊被廣泛的使用於網路上的芳鄰、檔案總管、檔案分享等視窗工具。
TCP/IP 協定幾乎承受所有的網路安全風險，當一個系統連結上了網際網路，TCP/IP就可能是它最大的系統弱點。
```
# 網路連接
```
網路連接 (network binding) 是將一種網路協定與另一種網路協定或網路介面卡做綑綁。
右圖在作業系統裡顯示NetBIOS 協定執行在TCP/IP 協定之上。
NetBIOS是一個LAN的協定，因此NetBIOS訊息被放在TCP/IP (WAN) 封包裡通過網際網路傳送給遠端電腦。
依據LAN環境所設計的協定 (如NetBIOS) 走在WAN環境有其風險，應考慮關閉這種連接。
```
# Netbios 的風險
```
當安裝 TCP/IP 時，NetBIOS 被視窗作為默認設置載入，139 埠被打開。
  駭客可以利用這個功能攻擊伺服器，使檔案及印表機共用不安全。
網路下載的工具 NetBrute Scanner 掃描某 IP 網段，找到某位址的 139 埠開啟，就可以直接連上該機器未設密碼的共用檔夾；
  設密碼的檔夾則以密碼破解軟體 (password cracker) 通過。
```
# 強化網路組件
```
從營運面來看強化網路元件安全有以下兩個做法：
    適當的開啟與關閉服務與協定
        許多路由器提供動態主機設定協定 (DHCP)、封包過濾、與其它各式各樣的服務與協定。
        網管人員應該將其中不用的全部關閉，並盡量給網路元件設定較嚴格的條件。
    使用存取控制目錄 (access control list, ACL)
        ACL可以協助網路元件拒絕未得授權者的要求
            例如網管人員發現外部某IP位址經常掃描公司的網路，就可以將該IP位址放進ACL，阻止該位址傳來的任何要求。
```
# 強化網頁伺服器
```
微軟公司隨 Windows Server 所提供的 Internet Information Server (IIS) 是使用最廣也較常受攻擊的產品之一。
  Windows Server 2000 內涵之 IIS 5.0 曾遭受下列攻擊
    「緩衝區溢位 (buffer overflow)」
    「檔案系統橫越 (Unicode directory traversal)」
     Code Red 與 Nimda 都是攻擊這些漏洞的蠕蟲。
IIS 6.0 (Windows Server 2003) 已大幅改善網站伺服器的安全性，
  IIS 6.0使用比較謹慎的編碼和安全預設的設計原則，因此具有較佳的安全性追蹤記錄。
最新的 IIS 7.0 (Windows Server 2008) 則從核心層被分割為四十多個不同功能的模組，像認證、暫存、靜態頁面處理和目錄清單等。
  因此網站伺服器可依需要，僅安裝部分的功能模組，使程式受攻擊面得以縮小。
```
# 強化電子郵件伺服器
```
電子郵件伺服器主要的安全挑戰為透過郵件傳遞的病毒，和伺服器被挾持成為傳播垃圾郵件及病毒的中繼站。
```
# 強化 FTP 伺服器
```
FTP (file transfer protocol) 
    是個方便卻不見得安全的傳輸協定，許多商家與客戶間使用FTP傳送文件
      例如客戶上傳檔案給印刷廠。
      
FTP的第一個風險
    大多數FTP伺服器允許管理員在系統內任何磁碟或檔案區域進行檔案傳輸，
    若不注意則可能將過多的資料暴露給遠端的人。
    管理員應該使用獨立的磁碟或者目錄做檔案傳輸。
    
FTP的第二個風險
    傳輸過程沒有加密，因此機密文件以FTP傳輸必須使用VPN或SSH。
    
FTP可讓遠端使用者上傳資料，因此另一個風險是上傳的資料是否有病毒。
  系統管理員應經常對FTP伺服器做病毒掃描。
  
應當避免匿名使用FTP伺服器，讓遠端不知名的人任意的上傳與下載檔案到組織的系統內，是高風險的做法。
```
# 強化 DNS 伺服器
```
DNS (domain name service) 伺服器在網際網路上將主機名稱轉為IP位址。
DoS攻擊直接以DNS伺服器為對象，目的是干擾伺服器使服務中斷。
  預防的方法是讓DNS伺服器軟體及作業系統隨時更新。
組織內部網路的許多訊息都存放在DNS伺服器內，攻擊者可以使用查詢程式找到這些資料，幫助他瞭解網路的弱點。
  因此儘量讓這些訊息維持「夠用就好」。
如果在DNS伺服器插入錯誤的訊息，就有可能將網站拜訪者引導到其它的網站。
    設想當您拜訪一家公司的網站，卻被轉到色情網站，是多麼難堪的事。
    因此進行DNS伺服器資料更新前，必需做身分認證，以確保不會有未被授權的資料插入。
```
# 強化 DHCP 服務
```
DHCP (dynamic host configuration protocol) 被使用在許多網路中，自動指派 IP 位址給主機。
  它會監聽網路的 DHCP 請求﹐並與客戶端搓商 TCP/IP 的設定環境。

IP 定位方式﹕ 
    自動分配
      一旦客戶端第一次從 DHCP 伺服器端取得 IP 位址後，就永遠使用這個位址。 
    動態分配
      當客戶端第一次從 DHCP 伺服器端取得 IP 位址後，並非固定使用該位址，在一定的時間後客戶端要釋放這個位址。 
    動態分配比較靈活，當組織的實際 IP 位址不足時，動態分配可以服務更多的主機，因為使用者不致於全在同一個時間上網。
    一個網路或區段只能有一個 DHCP 伺服器， 否則會形成 IP 位址衝突。
      曾經有網路管理員在公司網路上測試一個含有 DHCP 伺服器功能的路由器，導致公司內的 IP 位址完全混亂。
```
# 強化檔案與列印伺服器
```
檔案與列印伺服器主要易受 DoS 及存取攻擊。
檔案與列印伺服器的功用較單純，因此應該只留下必要的協定而關閉其它的，如此可縮小承受攻擊面。
如果是PC級的伺服器，應該關閉 NetBIOS 功能，或是在伺服器與網際網路間安置防火牆。
  NetBIOS 通訊被使用於「網路上的芳鄰」等工具，許多對系統的攻擊是針對NetBIOS的服務。
當使用者連結上網路分享的目錄時，他並不知道 (也不應知道) 這個分享是在檔案系統的哪個位置。
  因此檔案伺服器應該避免分享根目錄 (root directory)，許多系統相關的檔案以及檔案系統訊息都在根目錄內。
對於分享出來的目錄，我們應當實施最嚴格的存取控制。
```
# 目錄服務
```
目錄服務視網路上的資料及資源為「物件 (object)」，所有的物件被歸入一個層級結構 (hierarchy)，而每一個物件都擁有唯一的名稱。
由於 X.500 在實施上過於複雜，它的精簡版 LDAP (lightweight directory access protocol) 成了業界的標準。
微軟公司的目錄服務產品 AD (Active Directory) 即以 LDAP 為存取協定。
之前網路中需要各個不同的目錄和 ID/password 並由每個應用程式或服務來管理。
    例如，網域本身需要一個目錄，電子郵件信箱與通訊群組清單需要一個不同的目錄，而遠端存取也需要不同的目錄。
組織的系統管理員可以將使者加入 AD 並透過該單一項目啟用網路的遠端存取，
  以相同的使用者帳戶使用電子郵件、執行帳戶資料庫存取、客戶關係管理或其他的應用程式。
  AD 是許多單點登錄系統 (single sign-on) 的基礎。
```
# 資料庫的三種模型
```
「一層模型」
    指資料庫與應用軟體運作在同一個系統中，多在早期 Unix 或今日的個人電腦單機環境中使用。
「雙層模型」
    指應用軟體在客戶端執行，而資料庫在伺服器上執行。這是最常用的資料庫架構
「三層模型」 
    將使用者與資料庫以中間層伺服器隔開，中間層接受客戶端的要求，加以評估後才送給資料庫伺服器處理；
    它也可以為資料庫提供更多的存取控制及安全機制。三層模型越來越常使用於企業環境中。
```
# 可信任的運算的四個目標
```
[1]多層次防禦工具
[2]IE 瀏覽器的安全機制
[3]Outlook 電子郵件的安全機制
[4]Exchange 郵件伺服器
```

# Exchange 垃圾郵件過濾流程
## 防火牆伺服器
```
Internet Security and Acceleration (ISA) Server 
    微軟的整合型網路防火牆產品，用來保護資訊環境免於網路攻擊，並提供使用者比較安全的遠端存取。
ISA 伺服器的主要功用
  ISA 可以讓組織裡的員工從遠端登入，安全地使用公司內部的資訊資源。
  ISA 可以安全的連結分支機構，展延組織的可信任網路。
  ISA 可以防禦網際網路的威脅，保護組織的資訊環境。
```
# Windows 作業系統的安全工具
## Defender 間諜軟體防護
```
Windows Defender 可偵測並移除電腦中已知的間諜軟體，讓瀏覽網際網路時更加安全；
  它使用由微軟分析人員提供的自動定義更新，在發現新威脅時偵測並移除這些威脅。
使用 Windows Defender 的好處
  協助偵測和移除間諜軟體
      找出會降低電腦速度、顯示快顯廣告、變更網際網路設定或未經使用者同意便使用您的私人資訊之間諜軟體及其它有害程式。
      可以由使用者排定掃描和移除程序。
  提高網際網路瀏覽安全性
      Defender 可以在間諜軟體入侵電腦前防堵它。
      可以根據使用者的喜好設定，在背景執行並自動處理間諜軟體。 
  有助於阻止最新的威脅
      由微軟研究人員持續搜尋網際網路，調查新的間諜軟體並研發因應對策；
      同時透過 Microsoft SpyNet 社群，讓參與者協助辨識、通報間諜軟體。
```
## Forefront 防毒軟體
```
Windows Live OneCare 是安裝在主機上的防毒軟體
  而 Microsoft Forefront Client Security (原稱為 Client Protection) 則為企業提供整合式的惡意程式防禦。
Forefront Client Security 兩部分：
     被保護的主機上安裝的 Forefront Agent 和一般防毒軟體類似，會從廠商 (微軟) 處取得病毒定義更新。
     Forefront 管理伺服器，負責管理組織內安裝 Forefront Agent 的所有主機。
Forefront 架構讓組織可以集中管理惡意病毒防護，消除死角。
```
# 微軟惡意程式保護中心
## 事件檢視器
### RMS 資料存取控制
```
權利管理服務 (rights management services, RMS) 
    微軟公司 Windows Server 上的一個應用，讓組織可以訂定政策來控制資訊存取。
RMS 的概念是讓每筆資訊的保護能夠持續。保護機制跟著資料走，不能任意被移除。
資料監護 (data chaperon)
    RMS 伺服器負責設定與管理資料的存取控制；
    即使受保護的文件被送到該伺服器不能接觸到的地方，這些設定依然有效。
一般個人或較小的組織會用加解密方法傳送機密資料，
  但問題是接收者一旦解密後就可以任意使用該資料；
  但 RMS 可以持續控制存取。
```
# Configuration Manager 主要功能
## Operations Manager 全面監控技術
```
System Center Operations Manager 
    以組織的資訊資產風險管理為核心，建立起統一的安全事件監視和回應體系，以保障系統正確運作。
```
## Operations Manager 概述
```
Operations Manager 可以在大型組織中，完整地監視資訊環境。
  通過單一介面，管理員可以監視數以千計的伺服器、應用軟體與主機；
  瞭解組織的資訊環境是否健康。這對快速成長的組織尤其重要。
Operations Manager 透過系統及應用的事件管理、監視和警示、報告以及趨勢分析，來確保組織的操作安全。
Operation Manager 尤其適合監視微軟公司的平台與應用產品。
針對 50 個以上的微軟應用程式和 Windows 伺服器元件改善監視、疑難排解和問題解決。
管理商務關鍵服務
    Microsoft Exchange
    Microsoft SharePoint 產品和技術
    Microsoft Active Directory Domain Services。
```
# CLM/ILM 身分生命週期管理
```
數位身分 (digital identities) 的數量快速成長，以人力做身分管理容易出錯而且成本高。
  使用 CLM/ILM 工具可以提高身分管理效率。
Certificate Lifecycle Manager (CLM) 
    一個以政策及工作流程所驅動的解決方案，可以幫助組織管理數位憑證及智慧卡的生命周期。
CLM 設計了數位憑證及智慧卡的發出、取消、設定與稽核流程，同時以多重要素 (multi-factor) 身分認證強化安全性。
微軟將 CLM 與 MIIS 2003 (微軟身分整合伺服器) 整合成一個產品，
  名為 Identity Lifecycle Manager (ILM 2007)，可以完整地管理使用者的身分與憑證的生命周期。
它提供身分同步、憑證與通關密碼管理，以及跨越各種 Windows 及其它平台的使用者身分。
使用這種工具，資訊單位可以讓身分管理程序清楚定義並自動化。
```
