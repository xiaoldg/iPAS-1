
# 資訊系統與網路模型
```
1.資訊系統
  1.1常見的電腦階層
  1.2作業系統的基本功能
  1.3程式處理範例
  1.4記憶體元件
  1.5記憶體管理
  1.6記憶體映像
  1.7記憶體滲漏
  1.8虛擬記憶體
  1.9外掛儲存元件 – 光與磁
  1.10輸入輸出元件
  1.11虛擬機器
2.網路概論
  2.1網路連結組件
  2.2防火牆類別
  2.3 數據機
  2.4pbx 系統
  2.5無線通訊系統
  2.6雙絞線
  2.7同軸電纜
  2.8光纖
3.網路模型
  3.1 OSI 層級
  3.2實體層的簡述
  3.3網路拓樸說明
  3.4資料連接層的簡述
  3.5乙太網路 – IEEE 802.3
  3.6資料連接層的協定
  3.7網路層的簡述
  3.8 IP 位址
  3.9私人 IP 位址與 NAT
  3.10 ICMP
  3.11傳輸層的簡述
  3.12 TCP 與 UDP
  3.13會談層的簡述
  3.14展現層的簡述
  3.15應用層的簡述
4.Wireshark
  4.1 Wireshark 練習
  4.2從 Wireshark 學到的教訓
```
## 1.資訊系統
### 1.1常見的電腦階層
```
應用程式 (applications)
公用程式 (utilities)
作業系統 (operating systems)
電腦硬體 (computer hardware)
```
### 1.2作業系統的基本功能
```
硬體元件管理：作業系統的一個基本功能是管理硬體元件，使應用軟體的設計人員不需要再費心考慮硬體及硬體相容性的問題。

記憶體管理：一個電腦的記憶體種類繁多，除暫存器、SRAM, DRAM, ROM之外，還有硬碟及其它外接記憶體，都靠作業系統管理。

輸入輸出 (I/O) 操作：作業系統要操作多樣性的I/O，其中許多屬於外接的系統，
  例如印表機、螢幕、鍵盤、喇叭等。從 von Neumann 架構來看，網路也是電腦 I/O 的延伸。
  
程式執行：作業系統本身是個平台，確保公用程式及應用程式在硬體環境裡流暢的運作。

檔案與資料的存取控制：檔案與資料管理是作業系統的必備功能，DOS 及 COS 這類較單純的作業系統更以檔案管理為核心工作。

系統服務的提供：包括系統維護、效能提升、問題排除、錯誤診測與修正等等。
```
### 1.3程式處理範例
```
程式為 ’z = x + y’ 運算；在記憶體內該程式與資料 (x=5, y=7) 分開放置。
中央處理器將程式與資料載入暫存器內，由控制單元將它們分配給ALU的適當部份做運算。
得到的結果 ‘z=12’ 再寫回記憶體的資料部分。接著進行下一步的程式運算。
```
### 1.4記憶體元件
```
Random Access Memory (RAM) 一旦失去電源，會喪失它所儲存的資料。RAM的存取速度快，每位元的價格便宜，是電腦的主要記憶體。

Read-Only Memory (ROM)有兩個特性：一是它的資料只能讀出，卻不能寫回；二是失去電源時，儲存的資料仍能保存。

Programmable ROM (PROM), Erasable PROM (EPROM) 與 Electrically erasable PROM (EEPROM) 
  在失去電源時資料仍能保存，且皆可以電子方式清除與重寫。
  
快閃記憶體 (flash memory) 的性質類似EEPROM但較之便宜，
  已成為「非揮發性記憶體 (non-volatile memory)」(意即失去電源時資料仍能保存者) 的主流技術，
  大量使用於USB碟、數位相機、BIOS、手機及記憶卡。
```
### 1.5記憶體管理
```
作業系統會將正在使用或較常使用的程式與資料往CPU移動 ；
程式設計師並不知道程式在執行時會被怎麼移動，是作業系統依當時狀況做決定。

作業系統要管理每個程序對記憶體的存取，確保一個程序不會未經許可讀取其它程序的資料；這稱為「程序隔離」，讓程序不互相干擾。
```
### 1.6記憶體映像
```
CPU 以記憶體位址存取資料。CPU所定的位址稱做直接位址 (absolute addresses)。
記憶體有不同階層，而且許多應用程式會同時使用記憶體；因此應用程式不直接定址記憶體，而使用邏輯位址 (logic addresses)。
邏輯位址與直接位址間的關聯就是記憶體映像 (memory mapping) 。
```
### 1.7記憶體滲漏
```
應用程式向作業系統要求記憶體空間，作業系統為它指定一塊區域。若使用完畢後，
應用程式沒有通知作業系統，那塊區域就無法釋放做其它用途，這個現象稱做記憶體滲漏 (memory leaks)。

記憶體滲漏可能肇因於作業系統本身，應用程式，或驅動程式。原因都是軟體設計的疏失。

若駭客知道某系統有記憶體滲漏，就可以發動DoS攻擊。
例如一個 Unix 系統的 telnet 協定程式有記憶體滲漏問題，駭客就可以不斷地對它發訊息，
系統就會不停的為它指定記憶體，卻不能釋放，一段時間後記憶體即用罄。

克服記憶體滲漏的方法有二：一是設計程式時更謹慎，釋放每個用過的記憶體區域。
另一方法是使用垃圾收集 (garbage collection) 功能，讓系統找出並釋放不再被使用的記憶體。
```
### 1.8虛擬記憶體
```
作業系統可以將硬碟做為主記憶體的延伸，稱為虛擬記憶體 (virtual memory)。
主記憶體 (DRAM) 至多數個 GB，但硬碟可達數百 GB。因此在運算中主記憶體空間不足時，
可以用資料頁(pages)的型態將資料交換到硬碟暫存。
```
### 1.9外掛儲存元件 – 光與磁
```
軟式磁碟經常是病毒感染與資料竊盜的工具。由於容量較小，軟碟已被逐漸淘汰。

大部分資訊都儲存在硬式磁碟裡，包括作業系統、應用程式、與資料。
硬碟除了會感染病毒，也可能遭竊造成嚴重安全問題。防治的方法可將硬碟加密，金鑰儲藏於BIOS或智慧卡中。

磁帶是最古老的外掛儲存元件之一，價格便宜、速度快、容量極大，適合做大量資料典藏。
磁帶在讀寫時為序列式的，無法如磁碟隨機讀寫，因此磁帶上的資料更容易被駭客分析。

光碟技術進步神速，可寫入的CD取代軟碟成為個人電腦的標準配備，但也繼承所有資訊安全風險，包括病毒感染、遭竊等。
```
### 1.10輸入輸出元件
```
作業系統除了控制硬體與管理記憶體之外，也要負責管理輸入輸出元件 (I/O devices)，
如印表機、螢幕、鍵盤、喇叭等。作業系統可以直接對I/O元件發出命令，指示它該做的動作；
當I/O要求與CPU通訊時，作業系統也要能接受並處置 I/O元件發出的岔斷 (interrupts) 要求。

I/O元件通常有一個控制器 (controller)，插入電腦的擴充槽 (例如繪圖卡) 或經由訊號線與電腦連接 (例如印表機)。

控制器有自己的驅動程式 (driver)，作業系統以驅動程式與該控制器通訊。
例如當我們安裝一台新的印表機，需要先安裝它的驅動程式；否則作業系統不知道如何與印表機的控制器通訊。

作業系統需要妥善的使用I/O，並在不用時釋放 (release) 該元件。
Windows 9x 允許應用程式直接對I/O做存取要求；而Windows NT則由作業系統進行控管。因此後者在穩定度上明顯優於前者。

傳統的應用程式是不可分割的最小單元，電腦一次只能執行一個程式。

較先進的作業系統可以同時載入多個程式，形成 multiprogramming, multitasking 及 multithreading，以提高CPU使用率。
```
### 1.11虛擬機器
```
虛擬機器 (virtual machine) 是一個以軟體模擬的電腦系統。應用程式不是直接在硬體上執行，而是在虛擬機器上執行。

虛擬機器第一個優點為平台互通 (platform independent)：
應用程式通常無法跨平台，因為不同的CPU可能提供不同的指令集。
但是以 Java 等語言寫在虛擬機器上的應用程式則可以運作在所有 Java 虛擬機器上，
不受限於CPU或作業系統的差別。這個優點使 Java 尤其適用於網際網路等開放環境。

虛擬機器第一個優點為維護應用程式安全：
以 Java 等語言寫的應用程式只能使用虛擬機器所允許或提供的功能，因此應用程式的設計疏失不易造成系統的安全威脅。
```
## 2.網路概論
### 2.1網路連結組件
```
集線器 (hubs)
交換器 (switches)
路由器 (routers) 
```
### 2.2防火牆類別
```
封包過濾防火牆 (pocket filter firewall) 不分析封包的內容，它僅依據封包位址的資訊來決定是否允許該封包通行。
例如，防火牆可能允許連接埠80的Web封包通過，但不允許連接埠23的Telnet封包通過；防火牆亦可設定接受或拒絕某些IP位址。

狀態檢驗式防火牆 (stateful inspection firewall) 不僅決定是否允許封包通過，同時會留下紀錄，做為判斷後面封包的部分依據。
例如「SYN 洪水攻擊」應該可以通過封包過濾防火牆，因為SYN是合法的TCP連結指令；
但較難通過狀態檢驗式防火牆，因為連續收到成千上萬的 SYN 要求就極不正常。

代理人防火牆 (proxy firewall) 可被視為私人網路與任何其它網路的中間人，
它接到外部網路的請求之後，依據一些預定的原則做判斷該轉送這個請求，或是拒絕。
代理人防火牆將所有進出的封包都做加工處理，包括隱藏IP位址，在第一章的 NAT 就是這個做法。

```
### 2.3 數據機
```
數據機 (modem) 可以轉換電腦的數位訊號與傳統電話線的類比訊號，許多家庭仍使用傳統數據機或 ADSL。

數據機幾乎不提供安全性。撥號攻擊 (war-dialing) 是指有心人士以電腦程式不斷撥打不同的電話號碼，
一旦遇到對方是數據機就進行連線，並進而侵入組織的系統。

阻止撥號攻擊的三個基本方法如下：
   數據機設定為只接受某些特定門號的撥入，其它一律拒絕。
   撥入者需要以ID或password認證身分，再由數據機回撥之後連線。
   撥入鈴聲響較長時間 (例如十幾響之後)，數據機才啟動；因為撥號攻擊通常鈴聲響太久就會放棄。
應禁止員工在組織內私接數據機，那會形成 LAN 的後門。
```
### 2.4pbx 系統
```
PBX (private branch exchange) 系統，可以整合類比及數位語音、資料、呼叫器、網路、及各種應用於一個通訊系統中。
PBX讓資訊安全問題更為複雜：駭客的網路攻擊額外造成電話不通，增加對企業的衝擊；
外部的語音留言也可能被攔截、篡改。因此需要將PBX列為主要安全保護的資訊設備之一。

```
### 2.5無線通訊系統
```
GSM行動通訊具備加密功能，因此要在空間裡攔截語音訊息幾乎不可能。
GSM系統能提供加密機制，是因為手機SIM卡的金鑰與電信公司機房的金鑰都由電信公司所控制，是一個較封閉的系統。

WLAN 則未必具有認證與加密的功能，強化WLAN安全性有三種等級：
  最糟的情況是任何人都能連結無線網路入口，完全不做認證。

  其次是無線網路伺服器認證登入者，可避免惡意侵入者濫用網路資源或監看其他無線網路使用者。

  最安全的是使用者與無線網路伺服器之間彼此相互進行認證，可以避免「欺騙的無線基地台 (rogue access point)」。

WLAN 無線網路系統未必具有集中控管的設計，筆記型電腦與WLAN基地台之間可能沒有相同的金鑰，
因此大部分公共場所的無線網路並沒有認證與加密的機制，造成使用者與服務供應者雙重的風險。
```
### 2.6雙絞線
```
雙絞線是最簡單也最便宜的纜線技術，多年來都是最常使用的網路線。

非遮蔽式雙絞線 (unshielded twisted pair, UTP) 將兩條由銅絲組成的銅線分別覆上絕緣體後絞纏在一起，
可有效減低電磁干擾與交叉對話 (crosstalk)，外面再覆一層PVC外衣做為保護。

遮蔽式雙絞線 (shielded twisted pair, STP) 類似UTP，但另加一層接地的金屬遮蔽層，以降低電磁波干擾與電磁訊號外洩。

常見的網路線 CAT5 (100 Mbps) 或 CAT6 (1000 Mbps) 即為UTP。
```
### 2.7同軸電纜
```
同軸電纜 (coaxial cable, Coax) 以一條金屬中心線傳訊號，外包較厚的絕緣體。絕緣體外有編織的金屬網接地，再以最外層PVC外衣做為保護。
金屬中心線比雙絞線粗，因此可以支援較高頻寬與較長的纜線距離。接地的金屬網遮蔽層，可以降低電磁波干擾，並避免電磁訊號外洩。
同軸電纜的缺點是比較昂貴，而且粗重、不易彎折。因此只被使用於特定應用，例如有線電視。
```
### 2.8光纖
```
光纖 (fiber optics) 包含三個組件：
   光源：光源的產生可能是發光二極體 (LED) 或是二極體雷射光 (diode laser)。
   
   光纜線：基本上由三個部分組成：核心是很細的玻璃線或塑膠線來傳送光線。
   核心周圍的包層扮演光導角色，可以使光線折射回光纖。塑膠層包覆在外做為保護。
   
   光感應器：將光訊號轉回電訊號。
   
光纖的優缺點如下：
  優點：高頻寬；不受電磁干擾；很難掛線竊聽。
  缺點：較昂貴；較難安裝。
```
## 3.網路模型
### 3.1 OSI 層級
```
應用層 Application

展現層 Presentation

會談層 Session

傳輸層 Transport

網路層 Network

資料連結層 Data Link

實體層 Physical
```
### 3.2實體層的簡述
```
資料連結層所傳過來的位元被轉為電子訊號傳在實體的電路上。若以光纖或無線傳輸，則位元被轉為光訊號或是電波。

實體層也描述網路的拓樸 (topology)，就是電腦如何擺設、網路線怎麼連接等問題。網路拓樸在下兩頁討論。

實體層的另外一個功能是訊號處理，例如數據機的訊號與網路卡的訊號不同，各種纜線所能傳輸的訊號也各不相同；各種訊號的產生與轉換都發生在實體層。

許多硬體是運作在實體層，例如纜線或數據機等；但路由器與交換器等硬體就不只在實體層，像路由器就同時也涵蓋資料連結層與網路層。
```
### 3.3網路拓樸說明
```
匯流排 (bus)：所有的元件 (電腦、路由器、防火牆等) 都在一條匯流排上，匯流排的優點是可擴充性，
增加或移除元件不影響運作；缺點是一旦匯流排故障，整個網路都無法運作。

樹狀 (tree)：通常是以交換器將元件組成樹枝狀。優點也是可擴充性，增加或移除元件還算容易；
缺點是若交換器故障，影響掛在下面的所有元件。

環狀 (ring)：纜線圍成環形，資料都是同一個流向，以環狀結構以代符 (token) 控制資料流動順序。
優點是每個元件傳輸機會公平；缺點是任何元件故障，網路就無法運作。

網格狀 (Mesh)：所有元件都彼此連結；它的優點是有備援 (redundancy)，元件或纜線故障有機會找到替代通路。缺點是成本高且較難管理。

輻射狀 (star)：所有的元件都連結到一個中心元件 (例如一台路由器)，
目前區域網路大多採用輻射狀結構，因為容易管理。它的另一個優點是可擴充性，
增加或移除元件不影響運作；缺點是中心元件故障網路就無法運作。
```
### 3.4資料連接層的簡述
```
資料連接層是OSI的第二層，它連接第三層與第一層，也就是把電腦連接到實體網路。因此，資料連接層可被視為兩個次階層：
   Logic link control (LLC)：與網路層連接，管理兩機的連線並控制資料流動與順序。
   Media access control (MAC)：與實體層連接，經過纜線在兩機之間傳送資料框 (frames)。
   
資料連接層在網路層的「封包」與實體層的「訊號」之間做轉換，同時經由 checksum 等機制查驗實體層傳送來的訊號是否正確，若有錯誤則要求對方重送。

資料連接層可以將資料加密，但若資料在到達接收端之前經過任何其它元件 (如路由器)，就必須解密之後重新加密，造成加密品質的顧慮。
```
### 3.5乙太網路 – IEEE 802.3
```
乙太網路 (Ethernet) 被定義為 IEEE 802.3 標準， 在過去二十多年中，它一直是區域網路 (LAN) 的主力。
乙太網路的使用彈性大、價格相對低廉，而且在乙太網路上增加或移除元件也相當容易。

乙太網路一開始是 10 Mbps 的傳輸速率；90 年代開始轉向 100 Mbps 的第二代標準；現在已經進入 Giga-bit Ethernet。

乙太網路支援匯流排、輻射狀、與點對點的網路拓墣。由於乙太網路的流行，目前區域網路大多採用這幾種拓樸結構。

乙太網路與其早期競爭者 Token Ring (IEEE 802.5) 的比較如下：
   乙太網路在傳輸資料時使用較少的額外訊息 (overhead)，因此頻寬效率比 Token Ring 高。
   缺點是如果同一時間有超過一個元件在網路上要傳送訊息，乙太網路會要求元件重送以避免碰撞 (collision)；
     若重送機率太高，網路效率就大打折扣。環狀結構以代符 (token) 控制資料流動順序，因此沒有碰撞問題。
```
### 3.6資料連接層的協定
```
ARP (address resolution protocol) 協定將網路層 (L3) 的 IP 位址轉換成資料連結層 (L2) 的 MAC 位址。
   例如區域網路裡有一台電腦要傳送電子郵件上網際網路，它首先要找到路由器 (IP: 192.168.0.1)，
   所以這台電腦透過自己的網路卡在區域網路中廣播: “Who has 192.168.0.1?” 
   路由器收到廣播後就將自己的 MAC 位址提供給該電腦，兩者之間的資料連接層通訊就建立了。
   往後的資料框只要貼上路由器的 MAC 位址，就能送達。路由器收到資料框、解出 L3資料後，就可依據表頭裡的 IP 位址將郵件送上網際網路。
   
ARP 將 IP 位址與對應的 MAC 位址存在一個快取區域 (稱為 ARP cache)，所以不需要每次都廣播尋找。

一種駭客技巧稱為「快取毒化 (cache poisoning)」，就是藉由假造的 ARP 回應，在 ARP 快取裡存入不正確的IP 與 MAC 的對應，藉以啟動中間人攻擊 。
```
### 3.7網路層的簡述
```
資料連結層 (L2) 的功能是將資料框由一個元件傳送給另一個實體相連的元件；
而網路層 (L3) 的主要功能則是將資料由一台主機傳送給另一台並未實體相連的主機。

資料連結層使用實體位址來傳送資料，也就是每個元件唯一的 MAC 位址；
而網路層則使用每台主機的邏輯位址，這個位址是主機連結上網路後才被賦予的。

IP (Internet protocol) 是 TCP/IP 裡最重要的網路層協定，它主要有兩個功能：
IP 從上層接到的資料如果過大，會被切割成適當的大小，封裝成 IP 封包送往下一層。
IP 同時負責編訂 IP 位址並選擇路徑來傳送封包。
IP 並沒有在收發兩端建立連結，它只是將封包送往指定的 IP 位址。
```
### 3.8 IP 位址
```
在網際網路世界中，每台使用 IP 協定的主機，都必須擁有一個獨一無二的 IP 位址，才能相互找到對方並傳送資料。
IP 位址由 32 位元分成四個位元組，分別以十進位表示。
例如以下的位址: 11000000 10101000 00000000 01100100 被表達為: 192.168.0.100。

IP 位址分為 A、B、C 三種等級：
   第一個位元組從 1 到 127 (二進制的 0 開頭) 屬於 A 級，它的第一個位元組由 IANA 指定，
   其餘 24 位元自行運用，每個 A級有一千六百多萬個 IP 位址。
   
   第一個位元組從 128 到 191 (二進制的 10 開頭) 屬於 B 級，它的前兩個位元組由 IANA 指定，其餘自行運用，每個 B 級有六萬多個 IP 位址。
   
   第一個位元組從 192 到 223 (二進制的 110 開頭) 屬於 C 級，它的前三個位元組由 IANA 指定，每個 C 級只有 256 個位址。

第一個位元組從 224 到 255 則保留作它用。
```
### 3.9私人 IP 位址與 NAT
```
以下的位址被使用為「私人 IP 位址」，它們是供不直接連接網際網路的電腦使用 (例如區域網路內的電腦)，因此它們不是獨一無二的。
    10.0.0.0 到 10.225.225.225 (一個 A 級)
    172.16.0.0 到 172.31.255.255 (16 個 B 級)
    192.168.0.0 到 192.168.255.255 (256 個 C 級)，常使用於小型區域網路
   
組織內若使用私人 IP 位址，可讓組織在網際網路上只需要一個或很少的 IP 位址做代表，
  內部訊息送上網際網路前被改成代表的 IP 位址即可 (如圖)，這個功能稱為 NAT (network address translation)，優點有二：
    節省 IP 位址，現階段 IPv4 已明顯的產生位址不足的現象。
    內部主機的 IP 位址不會暴露於網際網路上，可降低外部攻擊的機會。
```
### 3.10 ICMP
```
ICMP (Internet control management protocol) 是 IP 的一種管理與控制的協定，
ICMP  在主機之間傳送關於網路狀態的訊息。ICMP 訊息裡包括某個主機的讀取條件，以及相關的路由資訊與更新。

ICMP 資訊大部分只提供給底層的網路設備，使用者直接執行 ICMP 協定的機會不多，較具代表性的是 ping 這個工具。

試著到視窗作業系統下執行「命令提示字元」，試著輸入 “ping  <某個你所知道的 IP 位址>”，就可以得到類似以下的 ICMP 訊息。
```
```
Ping 192.168.0.100 具有 32 位元組的資料:
回覆自 192.168.0.100: 位元組=32 time<1ms TTL=128
回覆自 192.168.0.100: 位元組=32 time<1ms TTL=128
回覆自 192.168.0.100: 位元組=32 time<1ms TTL=128
回覆自 192.168.0.100: 位元組=32 time<1ms TTL=128
192.168.0.100 的 Ping 統計資料:
    封包: 已傳送 = 4，已收到 = 4, 已遺失 = 0 (0% 遺失)，
大約的來回時間 (毫秒):
    最小值 = 0ms，最大值 = 0ms，平均 = 0ms
 ```
### 3.11傳輸層的簡述
```
傳輸層 (L4) 負責確保跨在網際網路兩端的主機之間能夠正確的傳輸訊息；
而網路層 (L3) 則在傳輸層下面，只管依 IP 位址傳送封包。兩層唇齒相依，因此 TCP (L4) 與 IP (L3) 經常被一起討論。

傳輸層的 TCP 與 UDP 協定 (見下頁) 中，連接埠 (port) 是在封包表頭裡的一個特殊數字，連接埠被用來對應到電腦裡的一個程序。

以大樓做比喻，郵差把信送到大樓管理室，就像網路層將封包送到 IP 位址；
下一步才由管理員把信送給每層樓的住戶，就像傳輸層將訊息送到指定的連接埠。

封包裡包含來源埠與目的埠，都是16位元數字。

特殊連接埠例如 80 是 HTTP (上網)，25 是SMTP (送電郵)，110 是 POP3 (收電郵) 等。
```
### 3.12 TCP 與 UDP
```
UDP (user datagram protocol) 和 TCP (transmission control protocol) 是傳輸層最常用的協議。

TCP 的目的是提供可靠的資料傳輸，並在通訊的主機之間保持一個虛擬連接。
TCP 通過每個封包提供的序號來完成封包重組。網路層會將每個封包視為獨立個體，
因此，即使同一個訊息的分段封包，也可以沿完全不同的路徑發送；這些封包都靠傳輸層的序號來重組。

為確保正確地接收資料，TCP 要求在目的電腦成功收到資料時發回一個確認 (即 ACK)。
如果在某個時限內未收到相應的 ACK，將重送封包。但若網路擁塞，重新傳送反而導致發送的封包重複；
此時，接收電腦可利用封包序號來判斷它重複而予以丟棄

UDP 與 TCP 的主要區別在於 UDP 不一定提供可靠的資料傳輸。事實上，
該協定不能保證資料準確無誤地到達目的地，但 UDP 在許多應用上非常有效律。
當某個程式的目標是儘快地傳輸盡可能多的資訊，而不計較資料正確性時，就可使用 UDP。

```
### 3.13會談層的簡述
```
會談層在 TCP/IP 之上，負責建立、控制、及關閉TCP 會談；它同時提供應用與應用之間的認證，和網路中物件的登入等服務。

會談層的服務包括：
   目錄服務 (directory services) 在主機之間做物件的身分認證。
   目錄服務視網路上的資料及資源為物件 (object)，所有的物件被歸入一個層級結構 (hierarchy)，
   而每一個物件都擁有唯一的名稱。目錄服務掌握網路資訊並且是單點登錄的窗口，它的相關技術及安全會在下一章做介紹。
   
   遠端程序呼叫 (remote procedure calls, RPC) 在主機之間做物件的執行。
   RPC 是讓一個電腦程式的 subroutine 或是 procedure 在遠端電腦執行，而程式設計師不需要知道這些遠端處裡的細節。
```
### 3.14展現層的簡述
```
應用程式在網路上通訊有時會用不同的格式，例如在用字元的時候，有的用 ASCII，有的用 Unicode。
  展現層確定對應的應用程式之間所傳的資料使用同一種格式。
  
展現層的另一個作用是為網路資料提供加解密與資料壓縮；當然，其他OSI階層也可能提供加密與壓縮。

像是 DRM (digital rights management) 這種直接影響資料展現的功能可以建置在展現層。

DRM 是指使用技術保護數位資料的著作權。
  例如微軟的 Vista 就使用PVP (protected video path) 技術，讓未獲授權的內容無法播放；
  或是 DVD 裡的 CSS (content scrambling system) 技術都是 DRM 的實踐。
```
### 3.15應用層的簡述
```
應用層是應用程式使用網路通訊服務的入口，當系統或應用需要在網路上傳送或接收資料時，
  就使用應用層的服務，例如要確定遠端對應的應用程式的身分與狀態時。
  
應用層是指網路通訊的應用協定，而非應用程式本身。
  例如 FTP 雖然是一個傳送檔案的應用程式；但應用層裡的 FTP 是指這一種傳送檔案的協定。
  
高階層和低階層的安全機制比較：
  從應用層做存取控制與資料加密需要倚賴管理員及使用者的安全意識；
    較底層的安全機制 (如 IPSec) 可由作業系統自動完成，未必須要使用者的參與。
  應用層加密的缺點是只保護了資訊本身，各階層的表頭資訊仍然暴露在外。
    相對的，低階層加密則因未必有使用者的參與，而增加了造假的機會。
```
## 4.Wireshark
```
Wireshark是一種封包分析工具，前身為 Ethereal (因商標問題而改名)，它是全球最受歡迎的網路封包分析軟體之一。Wireshark 擷取網路封包並加以分析後，顯示出詳細的網路封包資料。一般網管人員使用它診斷自己的網路問題；駭客也使用它攔截或分析他人的網路資訊。
Wireshark 是一種靜態的監看系統，它不會更改網路封包內容，也不會送封包到網路上。Wireshark 也不是入侵偵測系統 (IDS)，不會對網路上任何異常狀況產生警示，但仔細分析其所擷取的封包，有助管理員瞭解網路行為。 
過去網路封包分析軟體非常昂貴，但 Wireshark 屬於 GNU 自由軟體，使用者可以免費取得軟體及程式碼，並擁有修改及客製化的權利。
```
### 4.1 Wireshark 練習
```
啟動 Wireshark 工具軟體後，在 Capture 選項裡的 Options 選擇正確的網路介面卡，
就可以開始攔截網路上的封包。如果網段內只有自己一台主機，就只看得到本機傳出、傳入的訊息；若有其它主機，就也能看到別人的封包。

在 Capture 選項裡選 Start，開始攔截封包。接著啟動 Outlook (微軟電子郵件軟體)，數秒之後回到 Capture 選項裡選 Stop，停止封包攔截。
此時 Wireshark 頁面。
本機 (192:168:0:100)  與遠端郵件伺服器 (203:188:203:200) 間以 ARP (address resolution protocol) 等協定建立連線後，
就開始電子郵件的 POP (post office protocol) 協定。

郵件的使用者名稱 (USER) 與密碼 (PASS) 分別在封包內以明文傳送。由此可見網路與應用軟體的設計是多麼的不安全。
```
```
重新設定讓 Wireshark 攔截封包，這次使用瀏覽器，
在搜索引擎隨手打入字串 (例如 a 到 z) 然後送出；數秒後停止封包攔截，觀察攔截到的封包內容。

如下圖，攔截到的 HTTP 封包內可以看到這個字串，仍然是明文。
這是為何我們建議以 HTTPS 取代 HTTP 做電子商務。
```
```
最後，我們試著以 Wireshark 攔截一封寄出去的電子郵件。如下圖所示，攔截到的大多是主機送往伺服器的 SMTP 封包。

在 Wireshark 的 Analyze 選項裡選擇 Follow TCP Stream，就會將這些封包按照 TCP 順序重組，視窗內就是重組後的內容，幾乎原文重現！
```
### 4.2從 Wireshark 學到的教訓
```
經由前幾頁的 Wireshark 練習，我們知道要實現網路監看 (sniffer) 並不困難；這幫助大家認知網路是不安全的。

使用網路傳送任何機密資訊都應該加密，前面介紹了各種加密通訊協定，
  包括 IPSec, HTTPS, PGP 等。若無適當的機密通訊方法，就應該改採當面遞交光碟片的方式。
  
Wireshark 可以看到 MSN 等即時通訊工具也是以明文傳送訊息，因此即時通話也可能遭攔截與重組。

前面曾介紹「欺騙的無線基地台 (rogue access point)」，駭客在公共場所架設無線網路基地台。
  不明就裡的人連上網後，啟動Outlook 想收發電子郵件，但正如 Wireshark 練習一所示，
  駭客不費吹灰之力就取得使用者名稱與密碼。因此切忌使用來路不明的無線基地台。

```
